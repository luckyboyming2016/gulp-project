!function(e){var t=function(e){window.scrollTo(0,0),this.renderTimes=0,this.maxPage=e.maxPage||1e5,this.keyName=e.keyName||"users",this.Render=new e.Render,this.$loading=e.$loading,this.ScrollLoading=new e.ScrollLoading,this.callback=e.callback||"",this.binsEvent();var t=this;setTimeout(function(){t.fetch()},0)};t.prototype={formatNum:function(e){if(e.length<=3)return e;if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(e))return e;var t=RegExp.$1,s=RegExp.$2,n=RegExp.$3,i=new RegExp;for(i.compile("(\\d)(\\d{3})(,|$)");i.test(s);)s=s.replace(i,"$1,$2$3");return t+""+s+n},binsEvent:function(){var e=this;this.ScrollLoading.bind("event-fetch",function(){e.fetch()}),this.Render.bind("event-fetch-success",function(t){e.getLastData(t)||e.ScrollLoading.init()})},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=window.location.search.substr(1).match(t);return null!=s?s[2]:null},getApi:function(){return""},fetch:function(){var t=this;this.$loading[0].style.display="",this.callback?e.ajax({url:this.getApi(),type:"GET",dataType:"jsonp",jsonp:"v",jsonpCallback:"1",success:function(){}}):e.ajax({url:this.getApi(),type:"GET",dataType:"json",success:function(e){t.render(e)},error:function(){}})},getLastData:function(e){return-1===parseInt(e.nextCursor,10)||this.maxPage<=e.cursor||this.maxPage<=this.renderTimes+1},parseData:function(e){return e},getDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},render:function(e){this.getResultData&&"function"==typeof this.getResultData&&(e=this.getResultData(e)),e&&1===e.apistatus&&e.result&&(this.getLastData(e.result)&&(!this.renderTimes&&!e.result[this.keyName]||!this.renderTimes&&e.result[this.keyName]&&!e.result[this.keyName].length?e.result.complete_msg="暂无中奖用户":-1!=parseInt(e.result.nextCursor,10)?(e.result.complete_msg="以上为最新200条记录",e.result.nextCursor=-1):e.result.complete_msg="以上是全部中奖名单"),e=this.parseData(e.result),this.cursor=e.nextCursor,this.Render.render(e)),this.$loading[0].style.display="none",this.renderTimes=this.renderTimes+1}},window.List=t}(Zepto);